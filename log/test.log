MongoDB logging. Please note that logging negatively impacts performance and should be disabled for high-performance production apps.
MONGODB admin['$cmd'].find({:ismaster=>1})
MONGODB admin['$cmd'].find({:ismaster=>1})
MONGODB admin['$cmd'].find({:buildinfo=>1})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20776fcf1dd15b8000001'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:10 UTC, "updated_at"=>2012-12-19 18:29:10 UTC, "password_salt"=>"$2a$10$lrbAzC/OcLqPNYHBubl8Tu", "password_hash"=>"$2a$10$lrbAzC/OcLqPNYHBubl8TuBGUGt9.7jyNMUITtEf1MuQ/mWvPc2CW"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2077bfcf1dd15b8000002'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:15 UTC, "secret"=>"e1185e3aacd82c149a44564e3556a01510714db89b960483a202153c78198549", "updated_at"=>2012-12-19 18:29:16 UTC}])
MONGODB oauth_test['oauth_tokens'].insert([{"_id"=>BSON::ObjectId('50d2077cfcf1dd15b8000003'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "scope"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "created_at"=>2012-12-19 18:29:16 UTC, "token"=>"c5dfac4b956150ce49da065f19b4c84f9ec6929ea9ce37d907162e7d4565431b", "refresh_token"=>"984f38eef1901947f14ae64784c89a7e07efcd9f1778f9fdf05a77029b3d54a5", "expire_at"=>2012-12-19 18:59:16 UTC, "updated_at"=>2012-12-19 18:29:16 UTC}])
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d2077cfcf1dd15b8000004'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:16 UTC, "updated_at"=>2012-12-19 18:29:16 UTC}])


Started GET "/accesses" for 127.0.0.1 at 2012-12-19 13:29:16 -0500
  Processing by AccessesController#index as HTML
Redirected to http://www.example.com/log_in
Completed 302 Found in 1ms


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:18 -0500
  Processing by SessionsController#new as HTML
Rendered sessions/new.html.erb within layouts/application (8.0ms)
Completed 200 OK in 54ms (Views: 53.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20776fcf1dd15b8000001')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2077efcf1dd15b8000005'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:18 UTC, "updated_at"=>2012-12-19 18:29:18 UTC, "password_salt"=>"$2a$10$XpXbp4DQBA8w8SHdRRQ4Pu", "password_hash"=>"$2a$10$XpXbp4DQBA8w8SHdRRQ4Pu4gNkMb9kpAxEq0jr5VQMRA7wGcmzhlm"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2077efcf1dd15b8000006'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:18 UTC, "secret"=>"27f64d9ed514c002a746c878baa80a009ccebcd5fb713e3ca86016960b62b434", "updated_at"=>2012-12-19 18:29:18 UTC}])
MONGODB oauth_test['oauth_tokens'].insert([{"_id"=>BSON::ObjectId('50d2077efcf1dd15b8000007'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "scope"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "created_at"=>2012-12-19 18:29:18 UTC, "token"=>"695c7cb9f8b6008bc19714908ccb5130021abfb8c176c5dc7bcef3cb8ec1c198", "refresh_token"=>"2d89404dae2160abb9a0dd1e69ade18547f0ad67ea538e41f2322c0022d48e6b", "expire_at"=>2012-12-19 18:59:18 UTC, "updated_at"=>2012-12-19 18:29:18 UTC}])
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d2077efcf1dd15b8000008'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:18 UTC, "updated_at"=>2012-12-19 18:29:18 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:18 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:20 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/accesses
Completed 302 Found in 89ms


Started GET "/accesses" for 127.0.0.1 at 2012-12-19 13:29:20 -0500
  Processing by AccessesController#index as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2077efcf1dd15b8000005')})
MONGODB oauth_test['oauth_accesses'].find({:resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
Completed 200 OK in 58ms (Views: 57.0ms)


Started GET "/accesses" for 127.0.0.1 at 2012-12-19 13:29:20 -0500
  Processing by AccessesController#index as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2077efcf1dd15b8000005')})
MONGODB oauth_test['oauth_accesses'].find({:resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
Completed 200 OK in 9ms (Views: 9.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2077efcf1dd15b8000005')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20780fcf1dd15b8000009'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:20 UTC, "updated_at"=>2012-12-19 18:29:20 UTC, "password_salt"=>"$2a$10$wjHPx.93uP4JKOS8Ifj0We", "password_hash"=>"$2a$10$wjHPx.93uP4JKOS8Ifj0We7B4fnpkgaoX4HLcwNj6mbkXRDLnVG.i"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20780fcf1dd15b800000a'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:20 UTC, "secret"=>"d2bba1e4b6dbbbe511d70851e9915015604297f89821eb82245fb13d5a3a9f42", "updated_at"=>2012-12-19 18:29:20 UTC}])
MONGODB oauth_test['oauth_tokens'].insert([{"_id"=>BSON::ObjectId('50d20780fcf1dd15b800000b'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "scope"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "created_at"=>2012-12-19 18:29:20 UTC, "token"=>"f6abe5362a92c87c2fca410015b5dbe1943ae53dc7bed74d3fc78eeed25aeb41", "refresh_token"=>"f84ef5aef41842a81e4385cf99b063df283fb53564a1fa974a95818fd068fe41", "expire_at"=>2012-12-19 18:59:20 UTC, "updated_at"=>2012-12-19 18:29:20 UTC}])
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d20780fcf1dd15b800000c'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:20 UTC, "updated_at"=>2012-12-19 18:29:20 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:20 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:20 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20780fcf1dd15b8000009
Completed 302 Found in 75ms


Started GET "/users/50d20780fcf1dd15b8000009" for 127.0.0.1 at 2012-12-19 13:29:20 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20780fcf1dd15b8000009"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20780fcf1dd15b8000009')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20780fcf1dd15b8000009')})
Completed 200 OK in 63ms (Views: 38.0ms)


Started GET "/accesses" for 127.0.0.1 at 2012-12-19 13:29:20 -0500
  Processing by AccessesController#index as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20780fcf1dd15b8000009')})
MONGODB oauth_test['oauth_accesses'].find({:resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
Completed 200 OK in 9ms (Views: 8.0ms)


Started PUT "/accesses/50d2077cfcf1dd15b8000004/block" for 127.0.0.1 at 2012-12-19 13:29:20 -0500
  Processing by AccessesController#block as HTML
  Parameters: {"id"=>"50d2077cfcf1dd15b8000004"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20780fcf1dd15b8000009')})
MONGODB oauth_test['oauth_accesses'].find({:resource_owner_uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d2077cfcf1dd15b8000004')})
MONGODB oauth_test['oauth_accesses'].update({"_id"=>BSON::ObjectId('50d2077cfcf1dd15b8000004')}, {"$set"=>{"blocked"=>2012-12-19 18:29:20 UTC, "updated_at"=>2012-12-19 18:29:20 UTC}})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['oauth_tokens'].update({"_id"=>BSON::ObjectId('50d2077cfcf1dd15b8000003')}, {"$set"=>{"blocked"=>2012-12-19 18:29:20 UTC, "updated_at"=>2012-12-19 18:29:20 UTC}})
MONGODB oauth_test['oauth_tokens'].update({"_id"=>BSON::ObjectId('50d2077efcf1dd15b8000007')}, {"$set"=>{"blocked"=>2012-12-19 18:29:20 UTC, "updated_at"=>2012-12-19 18:29:20 UTC}})
MONGODB oauth_test['oauth_tokens'].update({"_id"=>BSON::ObjectId('50d20780fcf1dd15b800000b')}, {"$set"=>{"blocked"=>2012-12-19 18:29:20 UTC}})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
Redirected to http://www.example.com/accesses
Completed 302 Found in 9ms


Started GET "/accesses" for 127.0.0.1 at 2012-12-19 13:29:20 -0500
  Processing by AccessesController#index as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20780fcf1dd15b8000009')})
MONGODB oauth_test['oauth_accesses'].find({:resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
Completed 200 OK in 10ms (Views: 9.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20780fcf1dd15b8000009')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20780fcf1dd15b800000d'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:20 UTC, "updated_at"=>2012-12-19 18:29:20 UTC, "password_salt"=>"$2a$10$vcm.pjI4gnnttGeeiPeMW.", "password_hash"=>"$2a$10$vcm.pjI4gnnttGeeiPeMW.whzYS7elpawtyn4Thd4Y0XfgTD4uWH2"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20781fcf1dd15b800000e'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:21 UTC, "secret"=>"129ba0c843a968cb43b3a2be9284ca9912c35106d2783c0536d851cdd0e70406", "updated_at"=>2012-12-19 18:29:21 UTC}])
MONGODB oauth_test['oauth_tokens'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b800000f'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "scope"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "created_at"=>2012-12-19 18:29:21 UTC, "token"=>"ad30e32e55b7eab997cf61a29f75ff7ce1b8d520fba83b78d008c346eb1295f3", "refresh_token"=>"4b8f7a168c4bf80071dc9ad866ca56e583f419ca05dbb0131d6d255b0ed03485", "expire_at"=>2012-12-19 18:59:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000010'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])


Started GET "/accesses/50d20781fcf1dd15b8000010" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by AccessesController#show as HTML
  Parameters: {"id"=>"50d20781fcf1dd15b8000010"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20780fcf1dd15b8000009')})
Redirected to http://www.example.com/log_in
Completed 302 Found in 2ms


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20780fcf1dd15b800000d')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20781fcf1dd15b8000011'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC, "password_salt"=>"$2a$10$WaXOX7oJ3GJOOstu4LNCuu", "password_hash"=>"$2a$10$WaXOX7oJ3GJOOstu4LNCuu1qsyxC6DNZKN6jT2FtTfQWYP3Wam/dK"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20781fcf1dd15b8000012'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:21 UTC, "secret"=>"154da9db9cc48dc52b5d91b5308c5d7cb279c6c4a39e2efc7cbccf319f533b00", "updated_at"=>2012-12-19 18:29:21 UTC}])
MONGODB oauth_test['oauth_tokens'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000013'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "scope"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "created_at"=>2012-12-19 18:29:21 UTC, "token"=>"ac8690af1dec4b74f95fc3a3993213bfd2aea341a6d8631b1d3e70915b3a436a", "refresh_token"=>"e71b18dffa172564b046004943213779ecc1b0df7fc0064848a2fe0100ad9907", "expire_at"=>2012-12-19 18:59:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000014'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/accesses/50d20781fcf1dd15b8000010
Completed 302 Found in 73ms


Started GET "/accesses/50d20781fcf1dd15b8000010" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by AccessesController#show as HTML
  Parameters: {"id"=>"50d20781fcf1dd15b8000010"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000011')})
MONGODB oauth_test['oauth_accesses'].find({:resource_owner_uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20781fcf1dd15b8000010')})
MONGODB oauth_test['oauth_accesses'].update({"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000010')}, {"$push"=>{"oauth_daily_requests"=>{"times"=>0, "_id"=>BSON::ObjectId('50d20781fcf1dd15b8000015'), "created_at"=>2012-12-19 18:29:21 UTC}}})
MONGODB oauth_test['oauth_accesses'].update({"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000010'), "oauth_daily_requests._id"=>BSON::ObjectId('50d20781fcf1dd15b8000015')}, {"$set"=>{"oauth_daily_requests.0.day"=>"19", "oauth_daily_requests.0.month"=>"12", "oauth_daily_requests.0.year"=>"2012", "oauth_daily_requests.0.time_id"=>"20121219"}})
Completed 200 OK in 25ms (Views: 24.0ms)
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000016'), "resource_owner_uri"=>"http://www.iana.org/domains/example/users/another", "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])


Started GET "/accesses/50d20781fcf1dd15b8000014" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by AccessesController#show as HTML
  Parameters: {"id"=>"50d20781fcf1dd15b8000014"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000011')})
MONGODB oauth_test['oauth_accesses'].find({:resource_owner_uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20781fcf1dd15b8000014')})
MONGODB oauth_test['oauth_accesses'].update({"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000014')}, {"$push"=>{"oauth_daily_requests"=>{"times"=>0, "_id"=>BSON::ObjectId('50d20781fcf1dd15b8000017'), "created_at"=>2012-12-19 18:29:21 UTC}}})
MONGODB oauth_test['oauth_accesses'].update({"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000014'), "oauth_daily_requests._id"=>BSON::ObjectId('50d20781fcf1dd15b8000017')}, {"$set"=>{"oauth_daily_requests.0.day"=>"19", "oauth_daily_requests.0.month"=>"12", "oauth_daily_requests.0.year"=>"2012", "oauth_daily_requests.0.time_id"=>"20121219"}})
Completed 200 OK in 9ms (Views: 8.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000011')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20781fcf1dd15b8000018'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC, "password_salt"=>"$2a$10$2mSO1NFgH0hN39XHzLWUSu", "password_hash"=>"$2a$10$2mSO1NFgH0hN39XHzLWUSuifiM8PqtlyjNbgJ6mYqyKgIIh0.M7NO"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20781fcf1dd15b8000019'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:21 UTC, "secret"=>"d2bd1b745a9bd944e32f8f069664608e79bedd3064f895d008ebaad4706d0ca3", "updated_at"=>2012-12-19 18:29:21 UTC}])
MONGODB oauth_test['oauth_tokens'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b800001a'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "scope"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "created_at"=>2012-12-19 18:29:21 UTC, "token"=>"8755ff2ef2ab2aa437b89976b52843ec098110c60dc74a9600cb6934cae855e0", "refresh_token"=>"0c01291e71c8dc68a81eca41b0a730441a705f00cb12c2ebfb33bc059f9ee2e3", "expire_at"=>2012-12-19 18:59:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b800001b'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20781fcf1dd15b8000018
Completed 302 Found in 74ms


Started GET "/users/50d20781fcf1dd15b8000018" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20781fcf1dd15b8000018"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000018')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20781fcf1dd15b8000018')})
Completed 200 OK in 7ms (Views: 6.0ms)
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b800001c'), "resource_owner_uri"=>"http://www.iana.org/domains/example/users/another", "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b800001b')})


Started GET "/accesses/50d20781fcf1dd15b800001b" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by AccessesController#show as HTML
  Parameters: {"id"=>"50d20781fcf1dd15b800001b"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000018')})
MONGODB oauth_test['oauth_accesses'].find({:resource_owner_uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20781fcf1dd15b800001b')})
Redirected to http://www.example.com/
Completed 302 Found in 1ms


Started GET "/" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000018')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20781fcf1dd15b800001d'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC, "password_salt"=>"$2a$10$AeoIXoLJmhtgdvBuG4.d7u", "password_hash"=>"$2a$10$AeoIXoLJmhtgdvBuG4.d7u1hhe73q6Rv.5agZxql8PQ49JPZX4VRy"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20781fcf1dd15b800001e'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:21 UTC, "secret"=>"f3f63f3a97892668c8052cc4ea6731782f39caaae7aa3666d598bc419f678d98", "updated_at"=>2012-12-19 18:29:21 UTC}])
MONGODB oauth_test['oauth_tokens'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b800001f'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "scope"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "created_at"=>2012-12-19 18:29:21 UTC, "token"=>"2ff9d4ff77ebf9173749220a620dc043265466eafed7dd416573db58056417b0", "refresh_token"=>"fddcf373f036bde8fd4e1b9aaf670f2aa5ffa4af5b52db1513644700a09f646f", "expire_at"=>2012-12-19 18:59:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000020'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20781fcf1dd15b800001d
Completed 302 Found in 74ms


Started GET "/users/50d20781fcf1dd15b800001d" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20781fcf1dd15b800001d"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20781fcf1dd15b800001d')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20781fcf1dd15b800001d')})
Completed 200 OK in 8ms (Views: 7.0ms)
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000021'), "resource_owner_uri"=>"http://www.iana.org/domains/example/users/another", "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])


Started GET "/accesses/50d20781fcf1dd15b8000021" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by AccessesController#show as HTML
  Parameters: {"id"=>"50d20781fcf1dd15b8000021"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20781fcf1dd15b800001d')})
MONGODB oauth_test['oauth_accesses'].find({:resource_owner_uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20781fcf1dd15b8000021')})
Redirected to http://www.example.com/
Completed 302 Found in 2ms


Started GET "/" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b800001d')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20781fcf1dd15b8000022'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC, "password_salt"=>"$2a$10$DCk8C1q4ONZdm7aQrd3sOe", "password_hash"=>"$2a$10$DCk8C1q4ONZdm7aQrd3sOe2WGcMIT7fa.yAsf/7P64VntypSZVAUi"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20781fcf1dd15b8000023'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:21 UTC, "secret"=>"46d02897a1360059b4164b210d0d5bfdbc9afacf0344fc600e3c1684c7203810", "updated_at"=>2012-12-19 18:29:21 UTC}])
MONGODB oauth_test['oauth_tokens'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000024'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "scope"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "created_at"=>2012-12-19 18:29:21 UTC, "token"=>"85281702c43adfbbe1662652509cf5afebeff181d2a859d9401d6c7e57d1ffbf", "refresh_token"=>"65155d4f4e961834979d99ffa436335f71da48209c47d702ecf163eb25b6edeb", "expire_at"=>2012-12-19 18:59:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000025'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20781fcf1dd15b8000022
Completed 302 Found in 75ms


Started GET "/users/50d20781fcf1dd15b8000022" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20781fcf1dd15b8000022"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000022')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20781fcf1dd15b8000022')})
Completed 200 OK in 8ms (Views: 7.0ms)
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d20781fcf1dd15b8000026'), "resource_owner_uri"=>"http://www.iana.org/domains/example/users/another", "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "created_at"=>2012-12-19 18:29:21 UTC, "updated_at"=>2012-12-19 18:29:21 UTC}])


Started GET "/accesses/0" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by AccessesController#show as HTML
  Parameters: {"id"=>"0"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000022')})
Completed   in 1ms
Redirected to http://www.example.com/


Started GET "/" for 127.0.0.1 at 2012-12-19 13:29:21 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000022')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['oauth_tokens'].remove({:_id=>BSON::ObjectId('50d2077cfcf1dd15b8000003')})
MONGODB oauth_test['oauth_tokens'].remove({:_id=>BSON::ObjectId('50d2077efcf1dd15b8000007')})
MONGODB oauth_test['oauth_tokens'].remove({:_id=>BSON::ObjectId('50d20780fcf1dd15b800000b')})
MONGODB oauth_test['oauth_tokens'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b800000f')})
MONGODB oauth_test['oauth_tokens'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000013')})
MONGODB oauth_test['oauth_tokens'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b800001a')})
MONGODB oauth_test['oauth_tokens'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b800001f')})
MONGODB oauth_test['oauth_tokens'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000024')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2077bfcf1dd15b8000002')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2077efcf1dd15b8000006')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20780fcf1dd15b800000a')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b800000e')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000012')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000019')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b800001e')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000023')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000027'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC, "password_salt"=>"$2a$10$f50lCotaGZWX2HWNDVKix.", "password_hash"=>"$2a$10$f50lCotaGZWX2HWNDVKix.3i2Qby2DfFAt33CtqX4zjsSEyQeKsQ6"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000028'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC, "password_salt"=>"$2a$10$eWAF287aMoUUvsTf2vz5p.", "password_hash"=>"$2a$10$eWAF287aMoUUvsTf2vz5p.noLFwjCYDVUHAz1xkhQLCLoIkF/TM06"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000029'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC, "password_salt"=>"$2a$10$DS6Nr6hghKE3za4IKpFTo.", "password_hash"=>"$2a$10$DS6Nr6hghKE3za4IKpFTo.sBbwKQXLzhfN/svTjS5KVNmzUuXhJWG"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20782fcf1dd15b800002a'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:22 UTC, "secret"=>"cf519ce309c20ef77eebf461c6ae876d631aa9ab27c2b9c8d76d4ff0fa9ebb6d", "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20782fcf1dd15b800002b'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:22 UTC, "secret"=>"813f1103d2c8031649d44fc6ca92423f73453cf2ab1b3d5911a9831ee366ae55", "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20782fcf1dd15b800002c'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20782fcf1dd15b800002d'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas/read"], "scope_values"=>["pizzas/index", "pizzas/show"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20782fcf1dd15b800002e'), "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "uri"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "created_at"=>2012-12-19 18:29:22 UTC, "secret"=>"9c61fd4a8f8667758f86e406b2d6494c46ff6ff57fc301c5ef3761d6ac2bd301", "updated_at"=>2012-12-19 18:29:22 UTC}])


Started GET "/clients" for 127.0.0.1 at 2012-12-19 13:29:22 -0500
  Processing by ClientsController#index as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000022')})
Redirected to http://www.example.com/log_in
Completed 302 Found in 1ms


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:22 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000027')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000028')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000029')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b800002a')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b800002b')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b800002e')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b800002c')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b800002d')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20782fcf1dd15b800002f'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC, "password_salt"=>"$2a$10$Aa9uzQ8qKSLap4bP1Rg.b.", "password_hash"=>"$2a$10$Aa9uzQ8qKSLap4bP1Rg.b.8UFZKBuNMSK/ZGcszPFPFbSxmZrAvsm"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000030'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC, "password_salt"=>"$2a$10$sB94O16t7uIOcNObCAdP8.", "password_hash"=>"$2a$10$sB94O16t7uIOcNObCAdP8.lbH1dD5/TePVv4iyccdcdrMEvN.sGUW"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000031'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC, "password_salt"=>"$2a$10$mu5dFKxzbLFYfua133h/O.", "password_hash"=>"$2a$10$mu5dFKxzbLFYfua133h/O.jUdgbfGBZoCs4Fmzj1uxu6Gq/O2kcl."}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000032'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:22 UTC, "secret"=>"697cd280ef7754f18f9c6cff31d1c1c61758233ecc69c07a0433924ce9a3ac12", "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000033'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:22 UTC, "secret"=>"baf6ffb64792418140dab7cc811a437fe69c76db66b84219786cc5bc13e1dae1", "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000034'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000035'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas/read"], "scope_values"=>["pizzas/index", "pizzas/show"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000036'), "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "uri"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "created_at"=>2012-12-19 18:29:22 UTC, "secret"=>"d33467dfe09118bcc9e60a8e74cd8325dbf10cbc9a24ee0bc32941773185ee1e", "updated_at"=>2012-12-19 18:29:22 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:22 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:22 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/clients
Completed 302 Found in 74ms


Started GET "/clients" for 127.0.0.1 at 2012-12-19 13:29:22 -0500
  Processing by ClientsController#index as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20782fcf1dd15b800002f')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example"})
Completed 200 OK in 50ms (Views: 48.0ms)


Started GET "/clients" for 127.0.0.1 at 2012-12-19 13:29:22 -0500
  Processing by ClientsController#index as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20782fcf1dd15b800002f')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example"})
Completed 200 OK in 9ms (Views: 9.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b800002f')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000030')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000031')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000032')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000033')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000036')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000034')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000035')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000037'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC, "password_salt"=>"$2a$10$nNpPD3QI07zw3zCHpH7Wg.", "password_hash"=>"$2a$10$nNpPD3QI07zw3zCHpH7Wg.f2bMeNR8C1ojTx1FAnUDv2V6qFeHOZK"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000038'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC, "password_salt"=>"$2a$10$vnuRM6igTsGVAfNu77/sse", "password_hash"=>"$2a$10$vnuRM6igTsGVAfNu77/sse/w2M/X.TNh0JLiYEi0dVmlW1IPeNcMi"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20782fcf1dd15b8000039'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC, "password_salt"=>"$2a$10$4fGlhb7S8DR0HuokFmCBzO", "password_hash"=>"$2a$10$4fGlhb7S8DR0HuokFmCBzOt.GiuqCrdQFPS1jaQZjFlOH0hNcfTuW"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20782fcf1dd15b800003a'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:22 UTC, "secret"=>"fa0e262ffa98db1f913d6a2c84eef26bfb5b5efec4c187307037d11c93903a85", "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20782fcf1dd15b800003b'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:22 UTC, "secret"=>"00a5429522960b717cdf8b7b5b7073fac4ec134fd34b221d3e1be75d98b8c66a", "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20782fcf1dd15b800003c'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20782fcf1dd15b800003d'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:22 UTC, "updated_at"=>2012-12-19 18:29:22 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas/read"], "scope_values"=>["pizzas/index", "pizzas/show"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20782fcf1dd15b800003e'), "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "uri"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "created_at"=>2012-12-19 18:29:22 UTC, "secret"=>"faeb10b64cd94e89961ae3bdcc58905cd100cf261baabed52f2535d405b746e3", "updated_at"=>2012-12-19 18:29:22 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:22 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 31ms (Views: 31.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:22 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"admin@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"admin@example.com"})
Redirected to http://www.example.com/users/50d20782fcf1dd15b8000039
Completed 302 Found in 74ms


Started GET "/users/50d20782fcf1dd15b8000039" for 127.0.0.1 at 2012-12-19 13:29:23 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20782fcf1dd15b8000039"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000039')})
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000039')})
Completed 200 OK in 8ms (Views: 6.0ms)


Started GET "/clients" for 127.0.0.1 at 2012-12-19 13:29:23 -0500
  Processing by ClientsController#index as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000039')})
MONGODB oauth_test['clients'].find({})
Completed 200 OK in 10ms (Views: 10.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000037')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000038')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b8000039')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b800003a')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b800003b')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b800003e')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b800003c')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20782fcf1dd15b800003d')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20783fcf1dd15b800003f'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC, "password_salt"=>"$2a$10$x4sl6JeBhY5tkGFxqdspAu", "password_hash"=>"$2a$10$x4sl6JeBhY5tkGFxqdspAuLyyructo/NnhFh5HVrlgDSC1P97uB6y"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20783fcf1dd15b8000040'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC, "password_salt"=>"$2a$10$Vgm37A8YI.ACcrrfes1LAO", "password_hash"=>"$2a$10$Vgm37A8YI.ACcrrfes1LAOEoriQDEQmXisXT9l/kHBWygEGrn6xoy"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20783fcf1dd15b8000041'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC, "password_salt"=>"$2a$10$J1R.D8fxzS1IhLjiN8tpl.", "password_hash"=>"$2a$10$J1R.D8fxzS1IhLjiN8tpl.fyBLzTO99R7bnLPypAO1Czfbkf0zaru"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20783fcf1dd15b8000042'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:23 UTC, "secret"=>"b0aaf6895a0830ea149b317f9a850cbd51b949dfce5de1346eb94effeb08b1ed", "updated_at"=>2012-12-19 18:29:23 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20783fcf1dd15b8000043'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:23 UTC, "secret"=>"562dedc8213c16728e27bddfc810f58fe369b613878f4a4b635f0f16400333fa", "updated_at"=>2012-12-19 18:29:23 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20783fcf1dd15b8000044'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20783fcf1dd15b8000045'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas/read"], "scope_values"=>["pizzas/index", "pizzas/show"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20783fcf1dd15b8000046'), "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "uri"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "created_at"=>2012-12-19 18:29:23 UTC, "secret"=>"fbe27110d1c70a9014ed859fd62afa7546f388f582d9e13d2c673b90a501b246", "updated_at"=>2012-12-19 18:29:23 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:23 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:23 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"admin@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"admin@example.com"})
Redirected to http://www.example.com/users/50d20783fcf1dd15b8000041
Completed 302 Found in 73ms


Started GET "/users/50d20783fcf1dd15b8000041" for 127.0.0.1 at 2012-12-19 13:29:23 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20783fcf1dd15b8000041"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000041')})
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000041')})
Completed 200 OK in 8ms (Views: 7.0ms)


Started GET "/clients" for 127.0.0.1 at 2012-12-19 13:29:23 -0500
  Processing by ClientsController#index as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000041')})
MONGODB oauth_test['clients'].find({})
Completed 200 OK in 10ms (Views: 10.0ms)


Started PUT "/clients/50d20783fcf1dd15b8000042/block" for 127.0.0.1 at 2012-12-19 13:29:23 -0500
  Processing by ClientsController#block as HTML
  Parameters: {"id"=>"50d20783fcf1dd15b8000042"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000041')})
MONGODB oauth_test['clients'].find({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000042')})
MONGODB oauth_test['clients'].update({"_id"=>BSON::ObjectId('50d20783fcf1dd15b8000042')}, {"$set"=>{"blocked"=>2012-12-19 18:29:23 UTC}})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
Redirected to http://www.example.com/clients
Completed 302 Found in 4ms


Started GET "/clients" for 127.0.0.1 at 2012-12-19 13:29:23 -0500
  Processing by ClientsController#index as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000041')})
MONGODB oauth_test['clients'].find({})
Completed 200 OK in 11ms (Views: 10.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b800003f')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000040')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000041')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000043')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000046')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000042')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000044')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000045')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20783fcf1dd15b8000047'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC, "password_salt"=>"$2a$10$6RNywqZt.b16tvRe0.jite", "password_hash"=>"$2a$10$6RNywqZt.b16tvRe0.jiteB2rn.ppm8gbJSmbxm0KSqEjgLjAOAjC"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20783fcf1dd15b8000048'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC, "password_salt"=>"$2a$10$dhewRpP3mZqe7xxvVU6rzu", "password_hash"=>"$2a$10$dhewRpP3mZqe7xxvVU6rzum7e5rrfucWvrpyRtmPbIVxqngaq/t/C"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20783fcf1dd15b8000049'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC, "password_salt"=>"$2a$10$ErVhNPp3aRZtYJilVkF4SO", "password_hash"=>"$2a$10$ErVhNPp3aRZtYJilVkF4SOovWWQfTPPjBrxhU8HTkVqKrEx.9m2.i"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20783fcf1dd15b800004a'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:23 UTC, "secret"=>"5ad597d0dee0f5ff84dcb1a4b5927c581220fea4919ca244c625a55313670908", "updated_at"=>2012-12-19 18:29:23 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20783fcf1dd15b800004b'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:23 UTC, "secret"=>"c85ae97ecb01db6c6d017ce3df4d88fbd6a8f8e3394862304149f4c928a61a65", "updated_at"=>2012-12-19 18:29:23 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20783fcf1dd15b800004c'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20783fcf1dd15b800004d'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC}])


Started GET "/clients/50d20783fcf1dd15b800004a" for 127.0.0.1 at 2012-12-19 13:29:23 -0500
  Processing by ClientsController#show as HTML
  Parameters: {"id"=>"50d20783fcf1dd15b800004a"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000041')})
Redirected to http://www.example.com/log_in
Completed 302 Found in 1ms


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:23 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000047')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000048')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b8000049')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b800004a')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b800004b')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b800004c')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b800004d')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20783fcf1dd15b800004e'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC, "password_salt"=>"$2a$10$cc2c16TW/5JWdzq44ERZ/u", "password_hash"=>"$2a$10$cc2c16TW/5JWdzq44ERZ/uSRj/mAOAfZb.xX/TnBAQ291.E9oxgcm"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20783fcf1dd15b800004f'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:23 UTC, "updated_at"=>2012-12-19 18:29:23 UTC, "password_salt"=>"$2a$10$17J2BlYNcJ2/451t3Wguze", "password_hash"=>"$2a$10$17J2BlYNcJ2/451t3WguzeHHoy2ehHk3mVGVFUJtBJ.gxdbKz2Njm"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000050'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC, "password_salt"=>"$2a$10$IbQ9BEeQwjBnosPq0vzr8.", "password_hash"=>"$2a$10$IbQ9BEeQwjBnosPq0vzr8.XG0Er3hl9PVCHZQYMBaLjA7/WZzZgzq"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000051'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:24 UTC, "secret"=>"02893fff74c2857f12fd0e9dd580d00125f694951b33ec397be0a6a637b844a6", "updated_at"=>2012-12-19 18:29:24 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000052'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:24 UTC, "secret"=>"20adcab860df75988dc407befc99834b583d32556f50cc18711f75112745f8a8", "updated_at"=>2012-12-19 18:29:24 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000053'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000054'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/clients/50d20783fcf1dd15b800004a
Completed 302 Found in 73ms


Started GET "/clients/50d20783fcf1dd15b800004a" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by ClientsController#show as HTML
  Parameters: {"id"=>"50d20783fcf1dd15b800004a"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20783fcf1dd15b800004e')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20783fcf1dd15b800004a')})
Redirected to http://www.example.com/
Completed 302 Found in 1ms


Started GET "/" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started GET "/clients/50d20784fcf1dd15b8000051" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by ClientsController#show as HTML
  Parameters: {"id"=>"50d20784fcf1dd15b8000051"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20783fcf1dd15b800004e')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20784fcf1dd15b8000051')})
Completed 200 OK in 35ms (Views: 34.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b800004e')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20783fcf1dd15b800004f')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000050')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000051')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000052')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000053')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000054')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000055'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC, "password_salt"=>"$2a$10$4R2iDLAPswvZv5NMj5zo8O", "password_hash"=>"$2a$10$4R2iDLAPswvZv5NMj5zo8OpeuJujVC53hvNDzRE5kkVj5n8dR.EQO"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000056'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC, "password_salt"=>"$2a$10$vUUMxd0Keola7XOrjhaSTO", "password_hash"=>"$2a$10$vUUMxd0Keola7XOrjhaSTOCHWVqgNWM2o9lYY6CyuFOtORzPUK7Ci"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000057'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC, "password_salt"=>"$2a$10$dXPcTvBZ65gl0UX9Fwzu4e", "password_hash"=>"$2a$10$dXPcTvBZ65gl0UX9Fwzu4eiWcfQVyfF/4erh3s.IOQF7Z96z/0fXG"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000058'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:24 UTC, "secret"=>"3ebb0f27452fb564a010c0aa05a2b65d3db36d8244567a3571df71a2a762fe6f", "updated_at"=>2012-12-19 18:29:24 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000059'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:24 UTC, "secret"=>"bd541247bab86657deb9eeb4c596c9d691d24ae63f0fee8aa02b1c9d34a66448", "updated_at"=>2012-12-19 18:29:24 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20784fcf1dd15b800005a'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20784fcf1dd15b800005b'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20784fcf1dd15b8000055
Completed 302 Found in 74ms


Started GET "/users/50d20784fcf1dd15b8000055" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20784fcf1dd15b8000055"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000055')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20784fcf1dd15b8000055')})
Completed 200 OK in 7ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000058')})


Started GET "/clients/50d20784fcf1dd15b8000058" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by ClientsController#show as HTML
  Parameters: {"id"=>"50d20784fcf1dd15b8000058"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000055')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20784fcf1dd15b8000058')})
Redirected to http://www.example.com/
Completed 302 Found in 1ms


Started GET "/" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000055')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000056')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000057')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000059')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b800005a')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b800005b')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20784fcf1dd15b800005c'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC, "password_salt"=>"$2a$10$n3aFNwvAHN9fX0Ge7W5DXu", "password_hash"=>"$2a$10$n3aFNwvAHN9fX0Ge7W5DXu4kfwSHutI/O/XBsyCOEgPqq9l0DXzx2"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20784fcf1dd15b800005d'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC, "password_salt"=>"$2a$10$N2p6XEWscczDqDI4ffNQx.", "password_hash"=>"$2a$10$N2p6XEWscczDqDI4ffNQx.N6zvKP6Fja.3m50XlkFd6DDn1thpLi2"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20784fcf1dd15b800005e'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC, "password_salt"=>"$2a$10$4CjuOSTK/HrQCZri5jDgsO", "password_hash"=>"$2a$10$4CjuOSTK/HrQCZri5jDgsOsUDsRXnNiqIy5rRlFaXFqiCcBdTam4e"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20784fcf1dd15b800005f'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:24 UTC, "secret"=>"272bc0fefad9fbb5a89e0555f382aa495f8cc7ce7faecb38dfd7864ca9a2ced8", "updated_at"=>2012-12-19 18:29:24 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000060'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:24 UTC, "secret"=>"d77e8f1a29c018d98e79a29c364a5a0fdd838504eb13649320d32884e9859207", "updated_at"=>2012-12-19 18:29:24 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000061'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20784fcf1dd15b8000062'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:24 UTC, "updated_at"=>2012-12-19 18:29:24 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20784fcf1dd15b800005c
Completed 302 Found in 72ms


Started GET "/users/50d20784fcf1dd15b800005c" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20784fcf1dd15b800005c"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20784fcf1dd15b800005c')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20784fcf1dd15b800005c')})
Completed 200 OK in 8ms (Views: 7.0ms)


Started GET "/clients/50d20784fcf1dd15b8000060" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by ClientsController#show as HTML
  Parameters: {"id"=>"50d20784fcf1dd15b8000060"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20784fcf1dd15b800005c')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20784fcf1dd15b8000060')})
Redirected to http://www.example.com/
Completed 302 Found in 1ms


Started GET "/" for 127.0.0.1 at 2012-12-19 13:29:24 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b800005c')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b800005d')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b800005e')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b800005f')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000060')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000061')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20784fcf1dd15b8000062')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000063'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC, "password_salt"=>"$2a$10$yQ9h/g2vy9O/I7n.fdKjIu", "password_hash"=>"$2a$10$yQ9h/g2vy9O/I7n.fdKjIuEz4AxXh8161OjNrIksFzch.xC/u5pJS"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000064'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC, "password_salt"=>"$2a$10$cQ9N49LZX4q655QFY0b93O", "password_hash"=>"$2a$10$cQ9N49LZX4q655QFY0b93O/NjL4gQDGFhWsAw7za3c7sqTaiLe5n2"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000065'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC, "password_salt"=>"$2a$10$KlyPkb48nq6mQFVz4iE0/e", "password_hash"=>"$2a$10$KlyPkb48nq6mQFVz4iE0/e55dLXxt/ZgdPV4aAwaDEohnXNrOgo/y"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000066'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:25 UTC, "secret"=>"0cc34a9d0c9bceee514b49e27019bfd364282bf8d6413093ed4944416570c977", "updated_at"=>2012-12-19 18:29:25 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000067'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:25 UTC, "secret"=>"7eab4ad781d9af1498045f1d9b587436a869bd12018e118820c227a8953d0a68", "updated_at"=>2012-12-19 18:29:25 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000068'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000069'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:25 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:25 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20785fcf1dd15b8000063
Completed 302 Found in 73ms


Started GET "/users/50d20785fcf1dd15b8000063" for 127.0.0.1 at 2012-12-19 13:29:25 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20785fcf1dd15b8000063"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000063')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20785fcf1dd15b8000063')})
Completed 200 OK in 7ms (Views: 6.0ms)


Started GET "/clients/0" for 127.0.0.1 at 2012-12-19 13:29:25 -0500
  Processing by ClientsController#show as HTML
  Parameters: {"id"=>"0"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000063')})
Completed   in 1ms
Redirected to http://www.example.com/


Started GET "/" for 127.0.0.1 at 2012-12-19 13:29:25 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000063')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000064')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000065')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000066')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000067')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000068')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000069')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20785fcf1dd15b800006a'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC, "password_salt"=>"$2a$10$CIAk0xZBrUGfTjqDbwgVpO", "password_hash"=>"$2a$10$CIAk0xZBrUGfTjqDbwgVpOEd0kPzvP4KeH/T91ByF7jPKfxuTgJO."}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20785fcf1dd15b800006b'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC, "password_salt"=>"$2a$10$DM6bJ85XxtjIiuatmpt/CO", "password_hash"=>"$2a$10$DM6bJ85XxtjIiuatmpt/COnBqQe4WGa6DGPLTTRpkQBoHzEonrWOq"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20785fcf1dd15b800006c'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC, "password_salt"=>"$2a$10$llmoj8Uie7.bc63y24Uyb.", "password_hash"=>"$2a$10$llmoj8Uie7.bc63y24Uyb.fn3inkjB/AL67hqxE4XsZTXz4261.Ci"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20785fcf1dd15b800006d'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:25 UTC, "secret"=>"bf35260380bb86e5c02e8536176afd8cdf71ffce4975cdd55c4e47b07a2268e7", "updated_at"=>2012-12-19 18:29:25 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20785fcf1dd15b800006e'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:25 UTC, "secret"=>"0e60587bece53ebbba4113e2175c60254e38762a98936fdd341583f2ce05f3f5", "updated_at"=>2012-12-19 18:29:25 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20785fcf1dd15b800006f'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000070'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:25 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:25 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"admin@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"admin@example.com"})
Redirected to http://www.example.com/users/50d20785fcf1dd15b800006c
Completed 302 Found in 73ms


Started GET "/users/50d20785fcf1dd15b800006c" for 127.0.0.1 at 2012-12-19 13:29:25 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20785fcf1dd15b800006c"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20785fcf1dd15b800006c')})
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20785fcf1dd15b800006c')})
Completed 200 OK in 7ms (Views: 6.0ms)


Started GET "/clients/50d20785fcf1dd15b800006e" for 127.0.0.1 at 2012-12-19 13:29:25 -0500
  Processing by ClientsController#show as HTML
  Parameters: {"id"=>"50d20785fcf1dd15b800006e"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20785fcf1dd15b800006c')})
MONGODB oauth_test['clients'].find({:_id=>BSON::ObjectId('50d20785fcf1dd15b800006e')})
Completed 200 OK in 9ms (Views: 8.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b800006a')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b800006b')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b800006c')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b800006d')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b800006e')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b800006f')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000070')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000071'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC, "password_salt"=>"$2a$10$aCyEhXubuslhtD7xZpQ.jO", "password_hash"=>"$2a$10$aCyEhXubuslhtD7xZpQ.jOjfRJ1LE.AHFGLChIVDtZmzwxWErbcUK"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000072'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC, "password_salt"=>"$2a$10$Lhal8khfFiGCBtoDuldO0u", "password_hash"=>"$2a$10$Lhal8khfFiGCBtoDuldO0ucxVNo3hSuWWaBYpkXWpb6IFSMYpqgLq"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000073'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC, "password_salt"=>"$2a$10$MpRZ4FtH.xNLhw9NozmQ2O", "password_hash"=>"$2a$10$MpRZ4FtH.xNLhw9NozmQ2OG2lwcsDtXDEpwUtIvR96uPBymZN.9cm"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000074'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:25 UTC, "secret"=>"9ff5faed004ddfdd56d67171aff99aa15dc7f06cfd47f8f0f8d394d8ce8e8b44", "updated_at"=>2012-12-19 18:29:25 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000075'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:25 UTC, "secret"=>"181a9e91fac3a3fe90e2cb7bd4bfd5a199a2f2eaf1ed0a780a6ee59ab68a3a66", "updated_at"=>2012-12-19 18:29:25 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000076'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20785fcf1dd15b8000077'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:25 UTC, "updated_at"=>2012-12-19 18:29:25 UTC}])


Started GET "/clients/new" for 127.0.0.1 at 2012-12-19 13:29:25 -0500
  Processing by ClientsController#new as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20785fcf1dd15b800006c')})
Redirected to http://www.example.com/log_in
Completed 302 Found in 1ms


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:25 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000071')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000072')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000073')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000074')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000075')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000076')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20785fcf1dd15b8000077')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20786fcf1dd15b8000078'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:26 UTC, "updated_at"=>2012-12-19 18:29:26 UTC, "password_salt"=>"$2a$10$nbEsJr3kvGqoGFMbhetise", "password_hash"=>"$2a$10$nbEsJr3kvGqoGFMbhetiseKz8IQo4NXDgAc7KFdatUQS6b2YQm9MK"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20786fcf1dd15b8000079'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:26 UTC, "updated_at"=>2012-12-19 18:29:26 UTC, "password_salt"=>"$2a$10$oWvFrHwGWtiy/wHJS9tOd.", "password_hash"=>"$2a$10$oWvFrHwGWtiy/wHJS9tOd.QXZG1bdfzyBZPJjptx3p5EKVODVnJiC"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20786fcf1dd15b800007a'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:26 UTC, "updated_at"=>2012-12-19 18:29:26 UTC, "password_salt"=>"$2a$10$qXPO5pBjSaMgOLQFRpAoE.", "password_hash"=>"$2a$10$qXPO5pBjSaMgOLQFRpAoE.YlVVmNCiEOZLxsP3dJngbDbuZV2Zvae"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20786fcf1dd15b800007b'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:26 UTC, "secret"=>"48c7a7ca4b98cba8b44c04d734a8470863ea190e8c85fb9c7d505d7a9ad29e68", "updated_at"=>2012-12-19 18:29:26 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20786fcf1dd15b800007c'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:26 UTC, "secret"=>"7fabcb981a0e66cbce6ceb61e0de84a301efacd7b1cd2b31c8c1793f6ca33602", "updated_at"=>2012-12-19 18:29:26 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20786fcf1dd15b800007d'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:26 UTC, "updated_at"=>2012-12-19 18:29:26 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20786fcf1dd15b800007e'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:26 UTC, "updated_at"=>2012-12-19 18:29:26 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/clients/new
Completed 302 Found in 74ms


Started GET "/clients/new" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by ClientsController#new as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000078')})
Rendered clients/_form.html.erb (119.0ms)
Completed 200 OK in 180ms (Views: 179.0ms)


Started GET "/clients/new" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by ClientsController#new as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000078')})
Rendered clients/_form.html.erb (2.0ms)
Completed 200 OK in 11ms (Views: 10.0ms)


Started POST "/clients" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by ClientsController#create as HTML
  Parameters: {"utf8"=>"✓", "client"=>{"name"=>"example", "site_uri"=>"http://www.iana.org/domains/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas", "info"=>"This is an example app"}, "commit"=>"Create Client"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000078')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"], "granted_times"=>0, "revoked_times"=>0, "name"=>"example", "site_uri"=>"http://www.iana.org/domains/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "info"=>"This is an example app", "_id"=>BSON::ObjectId('50d20786fcf1dd15b8000081'), "created_from"=>"http://www.iana.org/domains/example/users/example", "uri"=>"http://www.example.com/clients/50d20786fcf1dd15b8000081", "created_at"=>2012-12-19 18:29:26 UTC, "secret"=>"be82556a5317b5dfa926cf03abdfdf5b090d92c24391bcea33b06d2e1253a8e5", "updated_at"=>2012-12-19 18:29:26 UTC}])
Redirected to http://www.example.com/clients/50d20786fcf1dd15b8000081
Completed 302 Found in 18ms


Started GET "/clients/50d20786fcf1dd15b8000081" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by ClientsController#show as HTML
  Parameters: {"id"=>"50d20786fcf1dd15b8000081"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000078')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20786fcf1dd15b8000081')})
Completed 200 OK in 9ms (Views: 8.0ms)
MONGODB oauth_test['clients'].find({}).sort([[:_id, :desc]])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000078')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000079')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b800007a')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b800007b')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b800007c')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.example.com/clients/50d20786fcf1dd15b8000081"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.example.com/clients/50d20786fcf1dd15b8000081"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.example.com/clients/50d20786fcf1dd15b8000081"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.example.com/clients/50d20786fcf1dd15b8000081"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000081')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b800007d')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b800007e')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20786fcf1dd15b8000082'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:26 UTC, "updated_at"=>2012-12-19 18:29:26 UTC, "password_salt"=>"$2a$10$bgen0OKaYqvrcIKfCAYHXO", "password_hash"=>"$2a$10$bgen0OKaYqvrcIKfCAYHXOm4ETQ/1pTdZv2XZG9n/EoKtGOA7MFti"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20786fcf1dd15b8000083'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:26 UTC, "updated_at"=>2012-12-19 18:29:26 UTC, "password_salt"=>"$2a$10$Rmr6q9EnIMKmZHQ6eo2oeO", "password_hash"=>"$2a$10$Rmr6q9EnIMKmZHQ6eo2oeOuu6aQTgCKfEpfIo6kXyvWxHkrFM/DKC"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20786fcf1dd15b8000084'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:26 UTC, "updated_at"=>2012-12-19 18:29:26 UTC, "password_salt"=>"$2a$10$HclReYcLRuKs48lF96OZi.", "password_hash"=>"$2a$10$HclReYcLRuKs48lF96OZi.aIcc4evbdb3btCqLH0LMgd2Y6d9NzqW"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20786fcf1dd15b8000085'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:26 UTC, "secret"=>"945b13b01d41f29aac19a7d15e5f0dbbe44ba8a008569d36a2e15eb6538d0b64", "updated_at"=>2012-12-19 18:29:26 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20786fcf1dd15b8000086'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:26 UTC, "secret"=>"5a1bff84fd6fdc0f64daec58a79df6f89e938a23e870ee3bdbe03248d48a6e80", "updated_at"=>2012-12-19 18:29:26 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20786fcf1dd15b8000087'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:26 UTC, "updated_at"=>2012-12-19 18:29:26 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20786fcf1dd15b8000088'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:26 UTC, "updated_at"=>2012-12-19 18:29:26 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20786fcf1dd15b8000082
Completed 302 Found in 75ms


Started GET "/users/50d20786fcf1dd15b8000082" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20786fcf1dd15b8000082"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000082')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20786fcf1dd15b8000082')})
Completed 200 OK in 8ms (Views: 7.0ms)


Started GET "/clients/new" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by ClientsController#new as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000082')})
Rendered clients/_form.html.erb (3.0ms)
Completed 200 OK in 10ms (Views: 9.0ms)


Started POST "/clients" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by ClientsController#create as HTML
  Parameters: {"utf8"=>"✓", "client"=>{"name"=>"example", "site_uri"=>"http://www.iana.org/domains/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas", "info"=>"This is an example app"}, "commit"=>"Create Client"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000082')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"], "granted_times"=>0, "revoked_times"=>0, "name"=>"example", "site_uri"=>"http://www.iana.org/domains/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "info"=>"This is an example app", "_id"=>BSON::ObjectId('50d20786fcf1dd15b800008a'), "created_from"=>"http://www.iana.org/domains/example/users/example", "uri"=>"http://www.example.com/clients/50d20786fcf1dd15b800008a", "created_at"=>2012-12-19 18:29:26 UTC, "secret"=>"835a43175ac86c1c44bd76a334a1b927121028ac0591ea304f0b92dd526a17e1", "updated_at"=>2012-12-19 18:29:26 UTC}])
Redirected to http://www.example.com/clients/50d20786fcf1dd15b800008a
Completed 302 Found in 5ms


Started GET "/clients/50d20786fcf1dd15b800008a" for 127.0.0.1 at 2012-12-19 13:29:26 -0500
  Processing by ClientsController#show as HTML
  Parameters: {"id"=>"50d20786fcf1dd15b800008a"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000082')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20786fcf1dd15b800008a')})
Completed 200 OK in 9ms (Views: 8.0ms)
MONGODB oauth_test['clients'].find({}).sort([[:_id, :desc]])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000082')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000083')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000084')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000085')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000086')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.example.com/clients/50d20786fcf1dd15b800008a"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.example.com/clients/50d20786fcf1dd15b800008a"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.example.com/clients/50d20786fcf1dd15b800008a"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.example.com/clients/50d20786fcf1dd15b800008a"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b800008a')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000087')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20786fcf1dd15b8000088')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20787fcf1dd15b800008b'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC, "password_salt"=>"$2a$10$w7cZ15vW2JOeU8Hg1MQozO", "password_hash"=>"$2a$10$w7cZ15vW2JOeU8Hg1MQozOJai4PP2vKyNGM/v0KTxzzCpKVxRT5km"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20787fcf1dd15b800008c'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC, "password_salt"=>"$2a$10$ATARzoZS.IFxezcjBk/epO", "password_hash"=>"$2a$10$ATARzoZS.IFxezcjBk/epOMYUj.DssN2FnOaqcQ9FYmGIMb4wlmE2"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20787fcf1dd15b800008d'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC, "password_salt"=>"$2a$10$PPVUS/Zz6.bd7rJ9cTnXMe", "password_hash"=>"$2a$10$PPVUS/Zz6.bd7rJ9cTnXMe0AowySB1azpd/eUHGrP3jgJQx8EaPZO"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20787fcf1dd15b800008e'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:27 UTC, "secret"=>"0fa0bde156ecea92274dd4abbbb02e2f37d4a25eb7678512179172c28fcce371", "updated_at"=>2012-12-19 18:29:27 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20787fcf1dd15b800008f'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:27 UTC, "secret"=>"d85f16e85818ff9d963e0e50d8d4e05d41a78d20b53fea394b585f2ddafb1cce", "updated_at"=>2012-12-19 18:29:27 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20787fcf1dd15b8000090'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20787fcf1dd15b8000091'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:27 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:27 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20787fcf1dd15b800008b
Completed 302 Found in 73ms


Started GET "/users/50d20787fcf1dd15b800008b" for 127.0.0.1 at 2012-12-19 13:29:27 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20787fcf1dd15b800008b"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20787fcf1dd15b800008b')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20787fcf1dd15b800008b')})
Completed 200 OK in 7ms (Views: 6.0ms)


Started GET "/clients/new" for 127.0.0.1 at 2012-12-19 13:29:27 -0500
  Processing by ClientsController#new as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20787fcf1dd15b800008b')})
Rendered clients/_form.html.erb (3.0ms)
Completed 200 OK in 10ms (Views: 9.0ms)


Started POST "/clients" for 127.0.0.1 at 2012-12-19 13:29:27 -0500
  Processing by ClientsController#create as HTML
  Parameters: {"utf8"=>"✓", "client"=>{"name"=>"example", "site_uri"=>"http://www.iana.org/domains/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas", "info"=>"This is an example app"}, "commit"=>"Create Client"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20787fcf1dd15b800008b')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"], "granted_times"=>0, "revoked_times"=>0, "name"=>"example", "site_uri"=>"http://www.iana.org/domains/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "info"=>"This is an example app", "_id"=>BSON::ObjectId('50d20787fcf1dd15b8000093'), "created_from"=>"http://www.iana.org/domains/example/users/example", "uri"=>"http://www.example.com/clients/50d20787fcf1dd15b8000093", "created_at"=>2012-12-19 18:29:27 UTC, "secret"=>"4c90c5b677da6a67670a7a55818dd5c92fbef56ce38820a8af300b37fc4bc677", "updated_at"=>2012-12-19 18:29:27 UTC}])
Redirected to http://www.example.com/clients/50d20787fcf1dd15b8000093
Completed 302 Found in 28ms


Started GET "/clients/50d20787fcf1dd15b8000093" for 127.0.0.1 at 2012-12-19 13:29:27 -0500
  Processing by ClientsController#show as HTML
  Parameters: {"id"=>"50d20787fcf1dd15b8000093"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20787fcf1dd15b800008b')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20787fcf1dd15b8000093')})
Completed 200 OK in 9ms (Views: 8.0ms)
MONGODB oauth_test['clients'].find({}).sort([[:_id, :desc]])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b800008b')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b800008c')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b800008d')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b800008e')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b800008f')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.example.com/clients/50d20787fcf1dd15b8000093"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.example.com/clients/50d20787fcf1dd15b8000093"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.example.com/clients/50d20787fcf1dd15b8000093"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.example.com/clients/50d20787fcf1dd15b8000093"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000093')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000090')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000091')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20787fcf1dd15b8000094'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC, "password_salt"=>"$2a$10$8eNyTXwwHF1SRmD2CHLEPe", "password_hash"=>"$2a$10$8eNyTXwwHF1SRmD2CHLEPeheB3o9/kwaS6NRyUd35llpiPiUNXwYi"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20787fcf1dd15b8000095'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC, "password_salt"=>"$2a$10$5t.0qihlFxlc6Z8ABdt7f.", "password_hash"=>"$2a$10$5t.0qihlFxlc6Z8ABdt7f.0mWUca/GWsmBxz3QtoVaPAWj6Efqu3G"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20787fcf1dd15b8000096'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC, "password_salt"=>"$2a$10$IgoSqLFTxqzxSaGXgBy5Bu", "password_hash"=>"$2a$10$IgoSqLFTxqzxSaGXgBy5Bu.nmOdZd8Wp3UhJtqAj5TYwO0ZEUeeoW"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20787fcf1dd15b8000097'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:27 UTC, "secret"=>"b1cbec77f3d5bb6ad20412239d7c2ba9dfb87d5bb1a2ff3942bd2619740d8c08", "updated_at"=>2012-12-19 18:29:27 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20787fcf1dd15b8000098'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:27 UTC, "secret"=>"014c8b05b85e3bc4ab48d1a897b5637d12c4553086dfb3d1690f0f3e44d1a258", "updated_at"=>2012-12-19 18:29:27 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20787fcf1dd15b8000099'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20787fcf1dd15b800009a'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:27 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:27 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20787fcf1dd15b8000094
Completed 302 Found in 75ms


Started GET "/users/50d20787fcf1dd15b8000094" for 127.0.0.1 at 2012-12-19 13:29:27 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20787fcf1dd15b8000094"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000094')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20787fcf1dd15b8000094')})
Completed 200 OK in 8ms (Views: 7.0ms)


Started GET "/clients/new" for 127.0.0.1 at 2012-12-19 13:29:27 -0500
  Processing by ClientsController#new as HTML
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000094')})
Rendered clients/_form.html.erb (2.0ms)
Completed 200 OK in 10ms (Views: 9.0ms)


Started POST "/clients" for 127.0.0.1 at 2012-12-19 13:29:27 -0500
  Processing by ClientsController#create as HTML
  Parameters: {"utf8"=>"✓", "client"=>{"name"=>"", "site_uri"=>"http://www.iana.org/domains/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas", "info"=>"This is an example app"}, "commit"=>"Create Client"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000094')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show"]}})
Rendered clients/_form.html.erb (3.0ms)
Completed 200 OK in 14ms (Views: 9.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000094')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000095')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000096')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000097')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000098')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000099')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b800009a')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20787fcf1dd15b800009d'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC, "password_salt"=>"$2a$10$z3Surh62t1tAZT1qILbyG.", "password_hash"=>"$2a$10$z3Surh62t1tAZT1qILbyG.J837DoSM3H016B9sxhoNxxrORHWZNPa"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20787fcf1dd15b800009e'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC, "password_salt"=>"$2a$10$Lq/ICquCms.51rnjFTI.ne", "password_hash"=>"$2a$10$Lq/ICquCms.51rnjFTI.nelS98T7AoVi41BdBestpqOG5m7.dRlK6"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20787fcf1dd15b800009f'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:27 UTC, "updated_at"=>2012-12-19 18:29:27 UTC, "password_salt"=>"$2a$10$TgZwipQrl7Lnuiatd3Hkie", "password_hash"=>"$2a$10$TgZwipQrl7Lnuiatd3HkiebP7kW/JVRYTyQCVIZKrIazK.XQZ6cTm"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000a0'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:28 UTC, "secret"=>"0559e6903d959db1f6782fa95ccaafabd2d3d4319787e6e1d9feb9f45d1dfead", "updated_at"=>2012-12-19 18:29:28 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000a1'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:28 UTC, "secret"=>"af1b93c2d6adfe6391492201d69016a8b409ace3441bcc5e4934873984c6bbac", "updated_at"=>2012-12-19 18:29:28 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000a2'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000a3'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC}])


Started GET "/clients/50d20788fcf1dd15b80000a0/edit" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by ClientsController#edit as HTML
  Parameters: {"id"=>"50d20788fcf1dd15b80000a0"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20787fcf1dd15b8000094')})
Redirected to http://www.example.com/log_in
Completed 302 Found in 1ms


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b800009d')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b800009e')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20787fcf1dd15b800009f')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a0')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a1')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a2')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a3')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000a4'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC, "password_salt"=>"$2a$10$nIfZAdgcTirMmvPcCYlFO.", "password_hash"=>"$2a$10$nIfZAdgcTirMmvPcCYlFO.xs1D0a4pAJgohYKtjx42ewCvpVdxnVO"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000a5'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC, "password_salt"=>"$2a$10$kv5fiEq/b18MZljK7j70au", "password_hash"=>"$2a$10$kv5fiEq/b18MZljK7j70au2TMuJ2cLj7Dh3o7veV4gdX56gmshxC2"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000a6'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC, "password_salt"=>"$2a$10$qigRbY5KhYwM6ze26iU7de", "password_hash"=>"$2a$10$qigRbY5KhYwM6ze26iU7deqnJpYamZI3YXmoKQn00VkEIEORalsG."}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000a7'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:28 UTC, "secret"=>"3494d2ca23fcfec3ec835adee43bab2fbb657cc70745c1728e292506dbb310b2", "updated_at"=>2012-12-19 18:29:28 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000a8'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:28 UTC, "secret"=>"b3e3cb0c8d8afb97522bc99d35f87e4cd5e1dbfcf88d2da2710d3f3f71ee4782", "updated_at"=>2012-12-19 18:29:28 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000a9'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000aa'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/clients/50d20788fcf1dd15b80000a0/edit
Completed 302 Found in 73ms


Started GET "/clients/50d20788fcf1dd15b80000a0/edit" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by ClientsController#edit as HTML
  Parameters: {"id"=>"50d20788fcf1dd15b80000a0"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a4')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20788fcf1dd15b80000a0')})
Redirected to http://www.example.com/
Completed 302 Found in 1ms


Started GET "/" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started GET "/clients/50d20788fcf1dd15b80000a7/edit" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by ClientsController#edit as HTML
  Parameters: {"id"=>"50d20788fcf1dd15b80000a7"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a4')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20788fcf1dd15b80000a7')})
Rendered clients/_form.html.erb (2.0ms)
Completed 200 OK in 26ms (Views: 24.0ms)


Started POST "/clients/50d20788fcf1dd15b80000a7" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by ClientsController#update as HTML
  Parameters: {"utf8"=>"✓", "client"=>{"name"=>"Example Updated", "site_uri"=>"http://www.iana.org/domains/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas", "info"=>"This is an example app"}, "commit"=>"Update Client", "id"=>"50d20788fcf1dd15b80000a7"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a4')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20788fcf1dd15b80000a7')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].update({"_id"=>BSON::ObjectId('50d20788fcf1dd15b80000a7')}, {"$set"=>{"scope_values"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"], "name"=>"Example Updated", "site_uri"=>"http://www.iana.org/domains/example", "info"=>"This is an example app"}})
Completed 200 OK in 13ms (Views: 8.0ms)
MONGODB oauth_test['clients'].find({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a7')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a4')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a5')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a6')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a8')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a7')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000a9')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000aa')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000ab'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC, "password_salt"=>"$2a$10$0PTMG/969WcBvczfBgUPGu", "password_hash"=>"$2a$10$0PTMG/969WcBvczfBgUPGulT9lAd7Omv8az5kQoHAE0/Q/A./tLE2"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000ac'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC, "password_salt"=>"$2a$10$jHPBmD5hE2Lf49kDSx1ZZO", "password_hash"=>"$2a$10$jHPBmD5hE2Lf49kDSx1ZZO4/uKbuJSQpZNAoBtWnUiNKQ6qqAETPy"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000ad'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC, "password_salt"=>"$2a$10$NF6hCWEuZ3DkjxXH.if4w.", "password_hash"=>"$2a$10$NF6hCWEuZ3DkjxXH.if4w.6dW6a4A6EzDwL/iTUugSDGhaM8biNh2"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000ae'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:28 UTC, "secret"=>"798cadc9df2043fb66851f98e7915f11657ae6362f3dd3ede0aadb9a44985a54", "updated_at"=>2012-12-19 18:29:28 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000af'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:28 UTC, "secret"=>"13b6d0a280133b55389cb08f4cfa46faade6efacc83dde73b074a5851f9f0bf8", "updated_at"=>2012-12-19 18:29:28 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000b0'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000b1'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20788fcf1dd15b80000ab
Completed 302 Found in 74ms


Started GET "/users/50d20788fcf1dd15b80000ab" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20788fcf1dd15b80000ab"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000ab')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20788fcf1dd15b80000ab')})
Completed 200 OK in 8ms (Views: 7.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000ae')})


Started GET "/clients/50d20788fcf1dd15b80000ae/edit" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by ClientsController#edit as HTML
  Parameters: {"id"=>"50d20788fcf1dd15b80000ae"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000ab')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20788fcf1dd15b80000ae')})
Redirected to http://www.example.com/
Completed 302 Found in 1ms


Started GET "/" for 127.0.0.1 at 2012-12-19 13:29:28 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000ab')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000ac')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000ad')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000af')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000b0')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000b1')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000b2'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC, "password_salt"=>"$2a$10$Izx79xjKTMocelWaDiYhQu", "password_hash"=>"$2a$10$Izx79xjKTMocelWaDiYhQum/Jtt0HGJe6lCEmPvyOiaiSwOLJUvFC"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20788fcf1dd15b80000b3'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:28 UTC, "updated_at"=>2012-12-19 18:29:28 UTC, "password_salt"=>"$2a$10$S6txBjPEMg8PwwHhyOkVsO", "password_hash"=>"$2a$10$S6txBjPEMg8PwwHhyOkVsOAqrDUpiIt/QDaUC0e743B42ApKF6.Te"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000b4'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC, "password_salt"=>"$2a$10$KKKXYDNIRFJRcOaz/vTG.O", "password_hash"=>"$2a$10$KKKXYDNIRFJRcOaz/vTG.OrIv8eWzYWkB9dyJ.uB9rzTLgF53uFb2"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000b5'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:29 UTC, "secret"=>"b95b8a5b3e47b2699140b2a6c40548ffffe05d6df4c3805ab4109dd39f2bca14", "updated_at"=>2012-12-19 18:29:29 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000b6'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:29 UTC, "secret"=>"cce1b02667495c5b6302405c9e59fd8f01d3675c7591986257ab43dc55ae341d", "updated_at"=>2012-12-19 18:29:29 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000b7'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000b8'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20788fcf1dd15b80000b2
Completed 302 Found in 74ms


Started GET "/users/50d20788fcf1dd15b80000b2" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20788fcf1dd15b80000b2"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000b2')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20788fcf1dd15b80000b2')})
Completed 200 OK in 8ms (Views: 7.0ms)


Started GET "/clients/50d20789fcf1dd15b80000b6/edit" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by ClientsController#edit as HTML
  Parameters: {"id"=>"50d20789fcf1dd15b80000b6"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000b2')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20789fcf1dd15b80000b6')})
Redirected to http://www.example.com/
Completed 302 Found in 1ms


Started GET "/" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000b2')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20788fcf1dd15b80000b3')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000b4')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000b5')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000b6')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000b7')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000b8')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000b9'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC, "password_salt"=>"$2a$10$siKwYyoLw5H8r5WHJb085e", "password_hash"=>"$2a$10$siKwYyoLw5H8r5WHJb085eLyNTjg1XPRqfZqVk1xscqXSFGJ86Yky"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000ba'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC, "password_salt"=>"$2a$10$sLjPz/qPYZo3HQ4MNlZ/sO", "password_hash"=>"$2a$10$sLjPz/qPYZo3HQ4MNlZ/sOztG1osIvflcOMibL.rl0lB94Fx8xoMq"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000bb'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC, "password_salt"=>"$2a$10$PlVC4nClP2.QU6ilKAyO.u", "password_hash"=>"$2a$10$PlVC4nClP2.QU6ilKAyO.uWEA6m2LJ7AdqaL9m9yYVYpKv4raM4W2"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000bc'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:29 UTC, "secret"=>"7a31d8b846652f23eed1debdfa6b440c1683ca151873ec2315dfa0d873832d0d", "updated_at"=>2012-12-19 18:29:29 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000bd'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:29 UTC, "secret"=>"6616ab19d972c2d1ec6a9123c208842a6125417491c936511301ff588477dc20", "updated_at"=>2012-12-19 18:29:29 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000be'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000bf'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20789fcf1dd15b80000b9
Completed 302 Found in 74ms


Started GET "/users/50d20789fcf1dd15b80000b9" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20789fcf1dd15b80000b9"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000b9')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20789fcf1dd15b80000b9')})
Completed 200 OK in 8ms (Views: 7.0ms)


Started GET "/clients/0" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by ClientsController#show as HTML
  Parameters: {"id"=>"0"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000b9')})
Completed   in 1ms
Redirected to http://www.example.com/


Started GET "/" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000b9')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000ba')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000bb')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000bc')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000bd')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000be')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000bf')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000c0'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC, "password_salt"=>"$2a$10$.wg.hXf1CmV5orBX9lim4u", "password_hash"=>"$2a$10$.wg.hXf1CmV5orBX9lim4uKpfSEIFrn5sRLogiLqnd0tCEilDream"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000c1'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC, "password_salt"=>"$2a$10$faQWfVJWM0fsw2JriNIL5u", "password_hash"=>"$2a$10$faQWfVJWM0fsw2JriNIL5umn9G9f5XLc4STRBDHiI67muUL.YtdcW"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000c2'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC, "password_salt"=>"$2a$10$AgCMTO67mhESzXoFzM7CSu", "password_hash"=>"$2a$10$AgCMTO67mhESzXoFzM7CSuR/Y5nektZvtszMDuvZVT9y4CILJTNZ6"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000c3'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:29 UTC, "secret"=>"cbb3db6533841c00a8fb64ed2104ffd4640c32f65fdc016295bfd62015634352", "updated_at"=>2012-12-19 18:29:29 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000c4'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:29 UTC, "secret"=>"a9dabe22881f96795510519f108501f980b53ab554ed9feb2970f37eeeb61247", "updated_at"=>2012-12-19 18:29:29 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000c5'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20789fcf1dd15b80000c6'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:29 UTC, "updated_at"=>2012-12-19 18:29:29 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d20789fcf1dd15b80000c0
Completed 302 Found in 73ms


Started GET "/users/50d20789fcf1dd15b80000c0" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d20789fcf1dd15b80000c0"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000c0')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20789fcf1dd15b80000c0')})
Completed 200 OK in 7ms (Views: 6.0ms)


Started GET "/clients/50d20789fcf1dd15b80000c3/edit" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by ClientsController#edit as HTML
  Parameters: {"id"=>"50d20789fcf1dd15b80000c3"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000c0')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20789fcf1dd15b80000c3')})
Rendered clients/_form.html.erb (3.0ms)
Completed 200 OK in 12ms (Views: 11.0ms)


Started POST "/clients/50d20789fcf1dd15b80000c3" for 127.0.0.1 at 2012-12-19 13:29:29 -0500
  Processing by ClientsController#update as HTML
  Parameters: {"utf8"=>"✓", "client"=>{"name"=>"", "site_uri"=>"http://www.iana.org/domains/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas", "info"=>"This is an example app"}, "commit"=>"Update Client", "id"=>"50d20789fcf1dd15b80000c3"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000c0')})
MONGODB oauth_test['clients'].find({:created_from=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d20789fcf1dd15b80000c3')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show"]}})
Rendered clients/_form.html.erb (4.0ms)
Completed 200 OK in 16ms (Views: 11.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000c0')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000c1')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000c2')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000c3')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000c4')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"scopes", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['scopes'].find({})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000c5')})
MONGODB oauth_test['scopes'].remove({:_id=>BSON::ObjectId('50d20789fcf1dd15b80000c6')})
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000c7'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC, "password_salt"=>"$2a$10$XLoAUJSR7CsiJCPbYs5Pne", "password_hash"=>"$2a$10$XLoAUJSR7CsiJCPbYs5PnetSNicgrSsHoBaV2dBc9WO4qV4hxwgTy"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"bob@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000c8'), "email"=>"bob@example.com", "uri"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC, "password_salt"=>"$2a$10$fGG3cPbsyEo8PMtQ0BScs.", "password_hash"=>"$2a$10$fGG3cPbsyEo8PMtQ0BScs.F7XBynOQczLsgFAfKMENnjtw7ka3id6"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"admin@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>true, "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000c9'), "email"=>"admin@example.com", "uri"=>"http://www.iana.org/domains/example/users/admin", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC, "password_salt"=>"$2a$10$DDjcmLHig5xtSz9FShTy.u", "password_hash"=>"$2a$10$DDjcmLHig5xtSz9FShTy.uOhvMSNBJvHM9SqB46SQouJOZxC8zv3K"}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000ca'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:30 UTC, "secret"=>"6369c18cb7d0b3d21e207e336ad19186cffb33dd342ab77f720f18677ce2e45d", "updated_at"=>2012-12-19 18:29:30 UTC}])
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000cb'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "name"=>"Not owned client", "created_from"=>"http://www.iana.org/domains/example/users/another", "created_at"=>2012-12-19 18:29:30 UTC, "secret"=>"ec12de1244db7d214523217d2f633ff8b5f62e22a52fdcb5c9e8da6be6c18628", "updated_at"=>2012-12-19 18:29:30 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000cc'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000cd'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"admin@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"admin@example.com"})
Redirected to http://www.example.com/users/50d2078afcf1dd15b80000c9
Completed 302 Found in 73ms


Started GET "/users/50d2078afcf1dd15b80000c9" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d2078afcf1dd15b80000c9"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000c9')})
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000c9')})
Completed 200 OK in 7ms (Views: 7.0ms)


Started GET "/clients/50d2078afcf1dd15b80000cb/edit" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by ClientsController#edit as HTML
  Parameters: {"id"=>"50d2078afcf1dd15b80000cb"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000c9')})
MONGODB oauth_test['clients'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000cb')})
Rendered clients/_form.html.erb (3.0ms)
Completed 200 OK in 10ms (Views: 10.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000c7')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000c8')})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000c9')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000ca')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000cb')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d2077efcf1dd15b8000008')})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d20780fcf1dd15b800000c')})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d2077cfcf1dd15b8000004')})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000010')})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000016')})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000014')})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b800001c')})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000020')})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000021')})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000025')})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d20781fcf1dd15b8000026')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000ce'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000cf'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d0'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC, "password_salt"=>"$2a$10$rrcgzsBe7mOg6dhfDwI55e", "password_hash"=>"$2a$10$rrcgzsBe7mOg6dhfDwI55eofRwQpHgclBuS5NRyaWkj5t7USgkvJS"}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d2078afcf1dd15b80000d0
Completed 302 Found in 73ms


Started GET "/users/50d2078afcf1dd15b80000d0" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d2078afcf1dd15b80000d0"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d0')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d2078afcf1dd15b80000d0')})
Completed 200 OK in 7ms (Views: 6.0ms)
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d1'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:30 UTC, "secret"=>"3ba0a2f75f094d58dde21f00399908d68a9ebb967da259ffed81e68c37a28db6", "updated_at"=>2012-12-19 18:29:30 UTC}])


Started GET "/oauth/authorization?response_type=code&scope=pizzas&client_id=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fusers%2Falice%2Fclient%2Flelylan&redirect_uri=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fapp%2Fcallback" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by Oauth::OauthAuthorizeController#show as HTML
  Parameters: {"response_type"=>"code", "scope"=>"pizzas", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d0')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['oauth_accesses'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['oauth_accesses'].insert([{"client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d2'), "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC}])
Completed 200 OK in 47ms (Views: 42.0ms)


Started POST "/oauth/authorization" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by Oauth::OauthAuthorizeController#create as HTML
  Parameters: {"response_type"=>"code", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas/create pizzas/update pizzas/destroy pizzas/index pizzas/show"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d0')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['oauth_accesses'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['clients'].update({"_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d1')}, {"$set"=>{"granted_times"=>1}})
MONGODB oauth_test['oauth_authorizations'].insert([{"client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "scope"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d3'), "created_at"=>2012-12-19 18:29:30 UTC, "code"=>"1fa3df61182aaff89603e720e3532d344b476a553230c1e7ed07e91fc440089f", "expire_at"=>2012-12-19 18:32:00 UTC, "updated_at"=>2012-12-19 18:29:30 UTC}])
Redirected to http://www.iana.org/domains/example/app/callback?code=1fa3df61182aaff89603e720e3532d344b476a553230c1e7ed07e91fc440089f
Completed 302 Found in 8ms


Started GET "/domains/example/app/callback?code=1fa3df61182aaff89603e720e3532d344b476a553230c1e7ed07e91fc440089f" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
MONGODB oauth_test['oauth_authorizations'].find({}).sort([[:_id, :desc]])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d0')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['oauth_authorizations'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d3')})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d1')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d2')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d4'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d5'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d6'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC, "password_salt"=>"$2a$10$FzjJxR0VWvfIouCVOCwVBu", "password_hash"=>"$2a$10$FzjJxR0VWvfIouCVOCwVBuyLSmH1D1xybmWgwpeQpZb8G5Vt4E99u"}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d2078afcf1dd15b80000d6
Completed 302 Found in 73ms


Started GET "/users/50d2078afcf1dd15b80000d6" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d2078afcf1dd15b80000d6"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d6')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d2078afcf1dd15b80000d6')})
Completed 200 OK in 7ms (Views: 6.0ms)
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d7'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:30 UTC, "secret"=>"e286242c1296a4c5b2c4be7b47f17e5c9c9e80be91fd22d7f19ce4bc4c239d7b", "updated_at"=>2012-12-19 18:29:30 UTC}])


Started GET "/oauth/authorization?response_type=code&scope=pizzas&client_id=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fusers%2Falice%2Fclient%2Flelylan&redirect_uri=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fapp%2Fcallback" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by Oauth::OauthAuthorizeController#show as HTML
  Parameters: {"response_type"=>"code", "scope"=>"pizzas", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d6')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['oauth_accesses'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['oauth_accesses'].insert([{"client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d8'), "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC}])
Completed 200 OK in 10ms (Views: 7.0ms)


Started POST "/oauth/authorization" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by Oauth::OauthAuthorizeController#destroy as HTML
  Parameters: {"response_type"=>"code", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas/create pizzas/update pizzas/destroy pizzas/index pizzas/show"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d6')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['oauth_accesses'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['clients'].update({"_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d7')}, {"$set"=>{"revoked_times"=>1}})
Redirected to http://www.iana.org/domains/example/app/callback?error=access_denied
Completed 302 Found in 5ms


Started GET "/domains/example/app/callback?error=access_denied" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d6')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d7')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000d8')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000d9'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000da'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078afcf1dd15b80000db'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:30 UTC, "updated_at"=>2012-12-19 18:29:30 UTC, "password_salt"=>"$2a$10$g9acTpLv4qjU0f9WC80udu", "password_hash"=>"$2a$10$g9acTpLv4qjU0f9WC80uduRGISH4yI7FDanC5LZY15jiXAnv3IR7q"}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:30 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d2078afcf1dd15b80000db
Completed 302 Found in 74ms


Started GET "/users/50d2078afcf1dd15b80000db" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d2078afcf1dd15b80000db"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000db')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d2078afcf1dd15b80000db')})
Completed 200 OK in 8ms (Views: 7.0ms)
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000dc'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:31 UTC, "secret"=>"e0ab9bbddf6e37760be60fde0f0ab1278e0447e11d5b44af642359904f5d41a9", "updated_at"=>2012-12-19 18:29:31 UTC}])
MONGODB oauth_test['clients'].update({"_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000dc')}, {"$set"=>{"blocked"=>2012-12-19 18:29:31 UTC}})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})


Started GET "/oauth/authorization?response_type=code&scope=pizzas&client_id=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fusers%2Falice%2Fclient%2Flelylan&redirect_uri=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fapp%2Fcallback" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by Oauth::OauthAuthorizeController#show as HTML
  Parameters: {"response_type"=>"code", "scope"=>"pizzas", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000db')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
Completed 200 OK in 199ms (Views: 172.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078afcf1dd15b80000db')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000dc')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000dd'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000de'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000df'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC, "password_salt"=>"$2a$10$TGa1H64fm7Leuv9Hcs/fUe", "password_hash"=>"$2a$10$TGa1H64fm7Leuv9Hcs/fUelWGZ9Wc3SSaD5Ig65Ardtl2StGR3BqC"}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d2078bfcf1dd15b80000df
Completed 302 Found in 73ms


Started GET "/users/50d2078bfcf1dd15b80000df" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d2078bfcf1dd15b80000df"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000df')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d2078bfcf1dd15b80000df')})
Completed 200 OK in 8ms (Views: 6.0ms)
MONGODB oauth_test['oauth_accesses'].insert([{"_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e0'), "client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC}])
MONGODB oauth_test['oauth_accesses'].update({"_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e0')}, {"$set"=>{"blocked"=>2012-12-19 18:29:31 UTC}})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e1'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:31 UTC, "secret"=>"b0a62fdd9976090923ea7a676d186b07dbb77875f9de5a9aee0a0b9823f7f9f4", "updated_at"=>2012-12-19 18:29:31 UTC}])


Started GET "/oauth/authorization?response_type=code&scope=pizzas&client_id=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fusers%2Falice%2Fclient%2Flelylan&redirect_uri=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fapp%2Fcallback" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by Oauth::OauthAuthorizeController#show as HTML
  Parameters: {"response_type"=>"code", "scope"=>"pizzas", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000df')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['oauth_accesses'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
Completed 200 OK in 10ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000df')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000e1')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000e0')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e2'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e3'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e4'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC, "password_salt"=>"$2a$10$hv1IpLQ0pzo7gA8R/PYRCO", "password_hash"=>"$2a$10$hv1IpLQ0pzo7gA8R/PYRCOaI4X77vmDP9mxrwcnt.oMVSUzGzRC.."}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d2078bfcf1dd15b80000e4
Completed 302 Found in 74ms


Started GET "/users/50d2078bfcf1dd15b80000e4" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d2078bfcf1dd15b80000e4"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000e4')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d2078bfcf1dd15b80000e4')})
Completed 200 OK in 8ms (Views: 7.0ms)
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e5'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:31 UTC, "secret"=>"408ac1be04baefa308c649785e111d97d4644aeefc88e3aedd02c9cc31a8b3ed", "updated_at"=>2012-12-19 18:29:31 UTC}])


Started GET "/oauth/authorization?response_type=code&scope=pizzas&client_id=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fusers%2Falice%2Fclient%2Flelylan&redirect_uri=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fapp%2Fcallback&state=extra" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by Oauth::OauthAuthorizeController#show as HTML
  Parameters: {"response_type"=>"code", "scope"=>"pizzas", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "state"=>"extra"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000e4')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['oauth_accesses'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['oauth_accesses'].insert([{"client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e6'), "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC}])
Completed 200 OK in 10ms (Views: 6.0ms)


Started POST "/oauth/authorization" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by Oauth::OauthAuthorizeController#create as HTML
  Parameters: {"response_type"=>"code", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas/create pizzas/update pizzas/destroy pizzas/index pizzas/show", "state"=>"extra"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000e4')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['oauth_accesses'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['clients'].update({"_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e5')}, {"$set"=>{"granted_times"=>1}})
MONGODB oauth_test['oauth_authorizations'].insert([{"client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "scope"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e7'), "created_at"=>2012-12-19 18:29:31 UTC, "code"=>"b629b21ea7fcb789cb83d8c436d20027e5c46922fced3f341c45d71438b7a380", "expire_at"=>2012-12-19 18:32:01 UTC, "updated_at"=>2012-12-19 18:29:31 UTC}])
Redirected to http://www.iana.org/domains/example/app/callback?code=b629b21ea7fcb789cb83d8c436d20027e5c46922fced3f341c45d71438b7a380&state=extra
Completed 302 Found in 7ms


Started GET "/domains/example/app/callback?code=b629b21ea7fcb789cb83d8c436d20027e5c46922fced3f341c45d71438b7a380&state=extra" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
MONGODB oauth_test['oauth_authorizations'].find({}).sort([[:_id, :desc]])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000e4')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['oauth_authorizations'].remove({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000e7')})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000e5')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000e6')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e8'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000e9'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000ea'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC, "password_salt"=>"$2a$10$8VetynLNbnKI.WN0kYODse", "password_hash"=>"$2a$10$8VetynLNbnKI.WN0kYODseVMkZCk/kUUTzvKucgn2ANh6F/Dged6y"}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d2078bfcf1dd15b80000ea
Completed 302 Found in 75ms


Started GET "/users/50d2078bfcf1dd15b80000ea" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d2078bfcf1dd15b80000ea"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000ea')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d2078bfcf1dd15b80000ea')})
Completed 200 OK in 8ms (Views: 7.0ms)
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000eb'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:31 UTC, "secret"=>"f9f12e80211490e702d7074567712f75416d795a518aecfc58ddf837dd224271", "updated_at"=>2012-12-19 18:29:31 UTC}])


Started GET "/oauth/authorization?response_type=code&scope=pizzas&client_id=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fusers%2Falice%2Fclient%2Flelylan&redirect_uri=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fapp%2Fcallback&state=extra" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by Oauth::OauthAuthorizeController#show as HTML
  Parameters: {"response_type"=>"code", "scope"=>"pizzas", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "state"=>"extra"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000ea')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['oauth_accesses'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['oauth_accesses'].insert([{"client_uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000ec'), "created_at"=>2012-12-19 18:29:31 UTC, "updated_at"=>2012-12-19 18:29:31 UTC}])
Completed 200 OK in 12ms (Views: 7.0ms)


Started POST "/oauth/authorization" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
  Processing by Oauth::OauthAuthorizeController#destroy as HTML
  Parameters: {"response_type"=>"code", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas/create pizzas/update pizzas/destroy pizzas/index pizzas/show", "state"=>"extra"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000ea')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['oauth_accesses'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['clients'].update({"_id"=>BSON::ObjectId('50d2078bfcf1dd15b80000eb')}, {"$set"=>{"revoked_times"=>1}})
Redirected to http://www.iana.org/domains/example/app/callback?error=access_denied&state=extra
Completed 302 Found in 5ms


Started GET "/domains/example/app/callback?error=access_denied&state=extra" for 127.0.0.1 at 2012-12-19 13:29:31 -0500
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000ea')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000eb')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d2078bfcf1dd15b80000ec')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000ed'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000ee'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000ef'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC, "password_salt"=>"$2a$10$X2R1iJR6KXV0RqzOSMZP/O", "password_hash"=>"$2a$10$X2R1iJR6KXV0RqzOSMZP/O0m4UWBJLdXimX.xZPOClF7viedP/38G"}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d2078cfcf1dd15b80000ef
Completed 302 Found in 75ms


Started GET "/users/50d2078cfcf1dd15b80000ef" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d2078cfcf1dd15b80000ef"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000ef')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d2078cfcf1dd15b80000ef')})
Completed 200 OK in 8ms (Views: 7.0ms)
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000f0'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:32 UTC, "secret"=>"cc7a925fae723593c7296c3079b72c5074659bf2ff00a775386c4321ecabc7ae", "updated_at"=>2012-12-19 18:29:32 UTC}])


Started GET "/oauth/authorization?response_type=code&scope=pizzas&client_id=http%3A%2F%2Fnot.existing%2F&redirect_uri=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fapp%2Fcallback" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by Oauth::OauthAuthorizeController#show as HTML
  Parameters: {"response_type"=>"code", "scope"=>"pizzas", "client_id"=>"http://not.existing/", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000ef')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://not.existing/", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
Completed 200 OK in 10ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000ef')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f0')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000f1'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000f2'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000f3'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC, "password_salt"=>"$2a$10$kvPmscPWcSdV7JDJiQyAae", "password_hash"=>"$2a$10$kvPmscPWcSdV7JDJiQyAae2Xri4s2/ilQO7VSTIydPNISoQ.cpS.i"}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d2078cfcf1dd15b80000f3
Completed 302 Found in 75ms


Started GET "/users/50d2078cfcf1dd15b80000f3" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d2078cfcf1dd15b80000f3"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f3')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f3')})
Completed 200 OK in 9ms (Views: 8.0ms)
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas/read"], "scope_values"=>["pizzas/index", "pizzas/show"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000f4'), "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "uri"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "created_at"=>2012-12-19 18:29:32 UTC, "secret"=>"791e5276ac7db00bbe764e1293d1edf8ec5f816fb51427d56941316849020d87", "updated_at"=>2012-12-19 18:29:32 UTC}])


Started GET "/oauth/authorization?response_type=code&scope=pizzas&client_id=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fusers%2Falice%2Fclient%2Friflect&redirect_uri=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fapp%2Fcallback" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by Oauth::OauthAuthorizeController#show as HTML
  Parameters: {"response_type"=>"code", "scope"=>"pizzas", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f3')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create", "pizzas/update", "pizzas/destroy", "pizzas/index", "pizzas/show"]}})
Completed 200 OK in 10ms (Views: 6.0ms)
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas"], "scope_values"=>["pizzas/index", "pizzas/show", "pizzas/create", "pizzas/update", "pizzas/destroy"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000f5'), "uri"=>"http://www.iana.org/domains/example/users/alice/client/lelylan", "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "created_at"=>2012-12-19 18:29:32 UTC, "secret"=>"b8b5f1e5ada741268d7e3baa5fa497718ecf3d7a3861baf9a7671bb8294e0cc5", "updated_at"=>2012-12-19 18:29:32 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f3')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f4')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/lelylan"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f5')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000f6'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000f7'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000f8'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC, "password_salt"=>"$2a$10$aJX84HMQE86ADcBO3yQ7u.", "password_hash"=>"$2a$10$aJX84HMQE86ADcBO3yQ7u.XlwArrPgBPFWe2PD7rckYV0LiYEDTpu"}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 7ms (Views: 7.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d2078cfcf1dd15b80000f8
Completed 302 Found in 75ms


Started GET "/users/50d2078cfcf1dd15b80000f8" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d2078cfcf1dd15b80000f8"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f8')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f8')})
Completed 200 OK in 8ms (Views: 7.0ms)
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas/read"], "scope_values"=>["pizzas/index", "pizzas/show"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000f9'), "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "uri"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "created_at"=>2012-12-19 18:29:32 UTC, "secret"=>"5a138d66bc07f3497f022ed731fa1a745deb908e6b02b9ccb1f48ea36889aa7c", "updated_at"=>2012-12-19 18:29:32 UTC}])


Started GET "/oauth/authorization?response_type=code&scope=pizzas%2Fread&client_id=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fusers%2Falice%2Fclient%2Friflect&redirect_uri=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fapp%2Fcallback" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by Oauth::OauthAuthorizeController#show as HTML
  Parameters: {"response_type"=>"code", "scope"=>"pizzas/read", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f8')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['oauth_accesses'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['oauth_accesses'].insert([{"client_uri"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000fa'), "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
Completed 200 OK in 10ms (Views: 6.0ms)


Started POST "/oauth/authorization" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by Oauth::OauthAuthorizeController#create as HTML
  Parameters: {"response_type"=>"code", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas/create"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f8')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/create"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create"]}})
Completed 200 OK in 8ms (Views: 6.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f8')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000f9')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000fa')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000fb'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000fc'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000fd'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC, "password_salt"=>"$2a$10$qTx0Zhv5sSFUCByImRkoVO", "password_hash"=>"$2a$10$qTx0Zhv5sSFUCByImRkoVOAZRwL6lB1T8TdAyiPsj6yGyzAlaa3x6"}])


Started GET "/log_in" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 6.0ms)


Started POST "/sessions" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "email"=>"alice@example.com", "password"=>"[FILTERED]", "commit"=>"Log in"}
MONGODB oauth_test['users'].find({:email=>"alice@example.com"})
Redirected to http://www.example.com/users/50d2078cfcf1dd15b80000fd
Completed 302 Found in 74ms


Started GET "/users/50d2078cfcf1dd15b80000fd" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by UsersController#show as HTML
  Parameters: {"id"=>"50d2078cfcf1dd15b80000fd"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000fd')})
MONGODB oauth_test['users'].find({:uri=>"http://www.iana.org/domains/example/users/example", :_id=>BSON::ObjectId('50d2078cfcf1dd15b80000fd')})
Completed 200 OK in 8ms (Views: 7.0ms)
MONGODB oauth_test['clients'].insert([{"scope"=>["pizzas/read"], "scope_values"=>["pizzas/index", "pizzas/show"], "granted_times"=>0, "revoked_times"=>0, "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000fe'), "name"=>"the client", "created_from"=>"http://www.iana.org/domains/example/users/example", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "uri"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "created_at"=>2012-12-19 18:29:32 UTC, "secret"=>"36985a2e35b6c792e99d2b5e13884223de5de7a814df5f9abf1f97e462cc8bbc", "updated_at"=>2012-12-19 18:29:32 UTC}])


Started GET "/oauth/authorization?response_type=code&scope=pizzas%2Fread&client_id=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fusers%2Falice%2Fclient%2Friflect&redirect_uri=http%3A%2F%2Fwww.iana.org%2Fdomains%2Fexample%2Fapp%2Fcallback" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by Oauth::OauthAuthorizeController#show as HTML
  Parameters: {"response_type"=>"code", "scope"=>"pizzas/read", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000fd')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/read"]}})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show", "pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/index", "pizzas/show"]}})
MONGODB oauth_test['oauth_accesses'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :resource_owner_uri=>"http://www.iana.org/domains/example/users/example"})
MONGODB oauth_test['oauth_accesses'].insert([{"client_uri"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "resource_owner_uri"=>"http://www.iana.org/domains/example/users/example", "_id"=>BSON::ObjectId('50d2078cfcf1dd15b80000ff'), "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
Completed 200 OK in 11ms (Views: 7.0ms)


Started POST "/oauth/authorization" for 127.0.0.1 at 2012-12-19 13:29:32 -0500
  Processing by Oauth::OauthAuthorizeController#destroy as HTML
  Parameters: {"response_type"=>"code", "client_id"=>"http://www.iana.org/domains/example/users/alice/client/riflect", "redirect_uri"=>"http://www.iana.org/domains/example/app/callback", "scope"=>"pizzas/create"}
MONGODB oauth_test['users'].find({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000fd')})
MONGODB oauth_test['scopes'].find({:name=>{"$in"=>["pizzas/create"]}})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :redirect_uri=>"http://www.iana.org/domains/example/app/callback"})
MONGODB oauth_test['clients'].find({:uri=>"http://www.iana.org/domains/example/users/alice/client/riflect", :redirect_uri=>"http://www.iana.org/domains/example/app/callback", :scope_values=>{"$all"=>["pizzas/create"]}})
Completed 200 OK in 8ms (Views: 7.0ms)
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000fd')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_authorizations", "query"=>{:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"}, "fields"=>nil})
MONGODB oauth_test['oauth_authorizations'].find({:client_uri=>"http://www.iana.org/domains/example/users/alice/client/riflect"})
MONGODB oauth_test['clients'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000fe')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['oauth_accesses'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b80000ff')})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2078cfcf1dd15b8000100'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2078cfcf1dd15b8000101'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2078cfcf1dd15b8000102'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:32 UTC, "updated_at"=>2012-12-19 18:29:32 UTC, "password_salt"=>"$2a$10$ZIYHomRJb1DYwdhPycDrO.", "password_hash"=>"$2a$10$ZIYHomRJb1DYwdhPycDrO.4i2RoA7hKCi5ScWQ7A1L0.E8ZxPB6G."}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2078cfcf1dd15b8000102')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20799fcf1dd15b8000103'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:29:45 UTC, "updated_at"=>2012-12-19 18:29:45 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20799fcf1dd15b8000104'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:29:45 UTC, "updated_at"=>2012-12-19 18:29:45 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20799fcf1dd15b8000105'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:29:45 UTC, "updated_at"=>2012-12-19 18:29:45 UTC, "password_salt"=>"$2a$10$6SY.cgbTQqIm4Wn5HIi1L.", "password_hash"=>"$2a$10$6SY.cgbTQqIm4Wn5HIi1L.GTzIU/qUwSbXe4xND3goBKUJH9Hviwq"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20799fcf1dd15b8000105')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d207fdfcf1dd15b8000106'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:31:25 UTC, "updated_at"=>2012-12-19 18:31:25 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d207fdfcf1dd15b8000107'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:31:25 UTC, "updated_at"=>2012-12-19 18:31:25 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d207fdfcf1dd15b8000108'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:31:25 UTC, "updated_at"=>2012-12-19 18:31:25 UTC, "password_salt"=>"$2a$10$kr0cN7A9WbqbYuip8vHwSu", "password_hash"=>"$2a$10$kr0cN7A9WbqbYuip8vHwSuoTuVvtRjFSA9n04b8yRLq3ume82BkXu"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d207fdfcf1dd15b8000108')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2083efcf1dd15b8000109'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:32:30 UTC, "updated_at"=>2012-12-19 18:32:30 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2083efcf1dd15b800010a'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:32:30 UTC, "updated_at"=>2012-12-19 18:32:30 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2083efcf1dd15b800010b'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:32:30 UTC, "updated_at"=>2012-12-19 18:32:30 UTC, "password_salt"=>"$2a$10$H5FQQZSatHJAn/1X.fctxO", "password_hash"=>"$2a$10$H5FQQZSatHJAn/1X.fctxOhI4HYbP.ZvFYY/1fd6PploeW1m9tB2C"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2083efcf1dd15b800010b')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2087efcf1dd15b800010c'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:33:34 UTC, "updated_at"=>2012-12-19 18:33:34 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2087efcf1dd15b800010d'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:33:34 UTC, "updated_at"=>2012-12-19 18:33:34 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2087efcf1dd15b800010e'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:33:34 UTC, "updated_at"=>2012-12-19 18:33:34 UTC, "password_salt"=>"$2a$10$NRDaVyKAJ9HXuLWGFDaRUe", "password_hash"=>"$2a$10$NRDaVyKAJ9HXuLWGFDaRUeeOEe8hx9Ujxy0No/yjMpSrXKbTgXpq."}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d2087efcf1dd15b800010e')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d208c0fcf1dd15b800010f'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:34:40 UTC, "updated_at"=>2012-12-19 18:34:40 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d208c0fcf1dd15b8000110'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:34:40 UTC, "updated_at"=>2012-12-19 18:34:40 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d208c0fcf1dd15b8000111'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:34:40 UTC, "updated_at"=>2012-12-19 18:34:40 UTC, "password_salt"=>"$2a$10$tEQTdrf1dD4VtYP777cac.", "password_hash"=>"$2a$10$tEQTdrf1dD4VtYP777cac.n/ZLR3LXkk8eQm35DPgUbI.aHWIUvwW"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d208c0fcf1dd15b8000111')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d20906fcf1dd15b8000112'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:35:50 UTC, "updated_at"=>2012-12-19 18:35:50 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d20906fcf1dd15b8000113'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:35:50 UTC, "updated_at"=>2012-12-19 18:35:50 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d20906fcf1dd15b8000114'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:35:50 UTC, "updated_at"=>2012-12-19 18:35:50 UTC, "password_salt"=>"$2a$10$r8.smjmeLS3mnU5zhX5Xfu", "password_hash"=>"$2a$10$r8.smjmeLS3mnU5zhX5Xfu1U6GBlf2dE90VdOzpvcRWMwtLhxxXBm"}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['users'].find({})
MONGODB oauth_test['users'].remove({:_id=>BSON::ObjectId('50d20906fcf1dd15b8000114')})
MONGODB oauth_test['$cmd'].find({"count"=>"clients", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['clients'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_accesses", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_accesses'].find({})
MONGODB oauth_test['$cmd'].find({"count"=>"oauth_tokens", "query"=>{}, "fields"=>nil})
MONGODB oauth_test['oauth_tokens'].find({})
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/index", "pizzas/show"], "_id"=>BSON::ObjectId('50d2094efcf1dd15b8000115'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas/read", "created_at"=>2012-12-19 18:37:02 UTC, "updated_at"=>2012-12-19 18:37:02 UTC}])
MONGODB oauth_test['scopes'].insert([{"values"=>["pizzas/read", "pizzas/create", "pizzas/update", "pizzas/destroy"], "_id"=>BSON::ObjectId('50d2094efcf1dd15b8000116'), "uri"=>"http://www.iana.org/domains/example/scopes/pizzas", "name"=>"pizzas", "created_at"=>2012-12-19 18:37:02 UTC, "updated_at"=>2012-12-19 18:37:02 UTC}])
MONGODB oauth_test['$cmd'].find({"count"=>"users", "query"=>{:email=>"alice@example.com"}, "fields"=>nil})
MONGODB oauth_test['users'].insert([{"admin"=>false, "_id"=>BSON::ObjectId('50d2094efcf1dd15b8000117'), "email"=>"alice@example.com", "uri"=>"http://www.iana.org/domains/example/users/example", "created_at"=>2012-12-19 18:37:02 UTC, "updated_at"=>2012-12-19 18:37:02 UTC, "password_salt"=>"$2a$10$JjR4FmLsr2U/TfE7AWeaOu", "password_hash"=>"$2a$10$JjR4FmLsr2U/TfE7AWeaOuKYBy.Fh2vSIEhoTnr/AjH1NCNtdoH4W"}])
